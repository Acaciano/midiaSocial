import * as tslib_1 from "tslib";
import { Component, Input, EventEmitter, Output, ViewEncapsulation, ElementRef } from '@angular/core';
import { NgbModal } from '@ng-bootstrap/ng-bootstrap';
import { NoticeService } from '../core/services/notice.service';
import { OccurrenceService } from '../core/services/occurrence.service';
import { ProfileService } from '../core/services/profile.service';
let HeaderComponent = class HeaderComponent {
    constructor(noticeService, occurrenceService, profileService, modalService, elementRef) {
        this.noticeService = noticeService;
        this.occurrenceService = occurrenceService;
        this.profileService = profileService;
        this.modalService = modalService;
        this.elementRef = elementRef;
        this.actionSelect = new EventEmitter();
        let scriptChat = document.createElement('script');
        scriptChat.type = "text/javascript";
        scriptChat.src = "https://cdn.agentbot.net/core/59ff0a5f9b3b351736d6d5c751b6fc3d.js";
        this.elementRef.nativeElement.appendChild(scriptChat);
    }
    ngOnInit() {
        this.profileService.get().subscribe(data => {
            this.profiles = data;
            this.profile = this.profiles[0].id;
        });
        this.occurrenceService.get().subscribe(data => {
            this.occurrences = data;
            this.unreadOccurrence = data.filter((item) => {
                return !item.lido;
            }).length;
        });
        this.noticeService.get().subscribe(data => this.notices = data);
        setTimeout(() => {
            $aivo.ready(function () {
                $aivo.user.set("key", "123456");
                $aivo.user.set("name", "Acaciano Neves Souza");
                $aivo.user.set("email", "acaciano.neves@gmail.com");
                $aivo.user.set("device", "11 942480645");
                $aivo.user.set("instituto", "Instituto Teste");
            });
        }, 1000);
    }
    openModal(content) {
        this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title', windowClass: 'iris-modal' }).result.then(() => { }, (reason) => { });
    }
    readMessage(occurrence) {
        if (this.unreadOccurrence > 0) {
            occurrence.lido = true;
            this.occurrenceService.put(occurrence);
            this.unreadOccurrence--;
        }
    }
    changeProfile() {
        this.actionSelect.emit(this.profile);
    }
    logOut() {
        localStorage.removeItem(this.logOutName);
    }
};
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HeaderComponent.prototype, "logOutName", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], HeaderComponent.prototype, "nameUser", void 0);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", Object)
], HeaderComponent.prototype, "actionSelect", void 0);
HeaderComponent = tslib_1.__decorate([
    Component({
        selector: 't-systems-iris-header',
        template: "<div class=\"header-iris\">\r\n    <div class=\"header-container\">\r\n        <div class=\"logo\"></div>\r\n        <div class=\"logo-hc\"></div>\r\n        <div class=\"logo-faepa\"></div>\r\n        <div class=\"separator\"></div>\r\n        <ul class=\"nav nav-mtd tabs-info z-depth-1\" role=\"tablist\">\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-dropdown [data]=\"profiles\" [(ngModel)]=\"profile\" (changeValue)=\"changeProfile()\">\r\n                </app-mini-dropdown>\r\n            </li>\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-button (click)=\"openModal(contentOccurrence)\" title=\"Ocorrencias\" icon=\"bell\"\r\n                    [num]=\"unreadOccurrence\"></app-mini-button>\r\n            </li>\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-button (click)=\"openModal(contentNotice)\" icon=\"exclamation-circle\" title=\"Avisos\">\r\n                </app-mini-button>\r\n            </li>\r\n            <div class=\"content-right-header\">\r\n                <div class=\"container-user-login\">\r\n                    Ol\u00E1, {{nameUser}}\r\n                </div>\r\n                <div class=\"container-user-login\">\r\n                    <a (click)=\"logOut()\" href=\"javascript:\">\r\n                        <i class=\"fas fa-cog\" placement=\"bottom\" ngbTooltip=\"Alterar Senha\"\r\n                            tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                    |\r\n                    <a href=\"javascript:\">\r\n                        <i class=\"fas fa-comment agent-launcher\" placement=\"bottom\" ngbTooltip=\"Chat\" tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                    |\r\n                    <a (click)=\"logOut()\" href=\"javascript:\">\r\n                        <i class=\"fas fa-power-off\" placement=\"bottom\" ngbTooltip=\"Sair\"\r\n                            tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </ul>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<ng-template #contentOccurrence let-modal>\r\n    <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Ocorr\u00EAncias</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let item of occurrences\" style=\"cursor: pointer;\" class=\"alert alert-secondary alert-non-read\"\r\n            [ngClass]=\"{'alert-read': item.lido}\" role=\"alert\">\r\n            <div class=\"date-alert\">\r\n                {{item.data | date: 'dd/MM/yyyy HH:mm'}}\r\n            </div>\r\n            <i class=\"far fa-check-square unread-icon\" *ngIf=\"!item.lido\"></i>\r\n            <i class=\"fas fa-check-square read-icon\" *ngIf=\"item.lido\"></i>\r\n            <a (click)=\"readMessage(item)\">{{item.mensagem}}</a>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #contentNotice let-modal>\r\n    <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Avisos</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let item of notices\" class=\"alert alert-secondary alert-default-iris\" role=\"alert\">\r\n            {{item.mensagem}} - {{item.data | date: 'dd/MM/yyyy HH:mm'}}\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<router-outlet></router-outlet>",
        encapsulation: ViewEncapsulation.None,
        styles: [".header-iris{width:100%;height:65px;float:left;box-shadow:0 5px 54px 2px rgba(0,0,0,.31);box-sizing:border-box;background-color:#fff;display:table;padding-top:10px}.header-container{width:1000px;margin:0 auto;position:relative}.logo{width:60px;height:22px;float:left;background:url(../../assets/img/logo.png);margin-top:12px}.logo-hc{width:60px;height:50px;float:left;background:url(../../assets/img/HC.png) 0 0/contain no-repeat;margin-top:4px;margin-left:10px}.logo-faepa{width:40px;height:50px;float:left;background:url(../../assets/img/Faepa.jpg) 0 0/contain no-repeat;margin-top:4px;margin-left:10px}.separator{width:1px;height:50px;float:left;background-color:#eef0f4;margin-left:15px;margin-right:15px}.nav-btn-iris{margin-top:5px;margin-right:5px}.nav-bar-iris{padding:0}.content-right-header{position:absolute;right:0;margin-top:5px}.container-user-login{width:100%;float:left;font-family:Gotham;font-size:11px;font-weight:700;color:#1368ad;text-align:right}.logout-button{margin-left:5px}.iris-modal .modal-content{background-color:#fff;font-family:Gotham;box-shadow:0 2px 28px 3px rgba(0,0,0,.24);border-radius:5px}.light-blue-backdrop{background-color:#5cb3fd}.modal-title{margin-bottom:0;line-height:1.5;font-weight:300;font-size:24px;color:#0870b3}.iris-modal .close{color:#0870b3}.alert-non-read{border-radius:5px;font-size:12px;font-weight:700;background-color:#fff}.alert-read{border-color:#0a88d9;font-weight:400}.date-alert{width:100%;font-size:10px}.unread-icon{position:absolute;right:10px;font-size:16px;top:10px}.read-icon{position:absolute;right:10px;font-size:16px;top:10px;color:#0a88d9}.alert-default-iris{background-color:#fff;font-size:12px}@media screen and (max-width:1000px){.header-container{width:100%;float:left;padding-left:10px;padding-right:10px;box-sizing:border-box}.content-right-header{right:10px}}"]
    }),
    tslib_1.__metadata("design:paramtypes", [NoticeService,
        OccurrenceService,
        ProfileService,
        NgbModal,
        ElementRef])
], HeaderComponent);
export { HeaderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FwcC1pcmlzLWhlYWRlci8iLCJzb3VyY2VzIjpbInNyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlHLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDaEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDeEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBWWxFLElBQWEsZUFBZSxHQUE1QixNQUFhLGVBQWU7SUFXMUIsWUFBb0IsYUFBNEIsRUFDdEMsaUJBQW9DLEVBQ3BDLGNBQThCLEVBQzlCLFlBQXNCLEVBQ3RCLFVBQXNCO1FBSlosa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDdEMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUNwQyxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsaUJBQVksR0FBWixZQUFZLENBQVU7UUFDdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQVp0QixpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFjMUMsSUFBSSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVsRCxVQUFVLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDO1FBQ3BDLFVBQVUsQ0FBQyxHQUFHLEdBQUcsbUVBQW1FLENBQUM7UUFDckYsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFF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YztRQUNoQixRQUFRO1FBQ1YsVUFBVTtHQWZyQixlQUFlLENBeUUzQjtTQXpFWSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgVmlld0VuY2Fwc3VsYXRpb24sIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTmdiTW9kYWwgfSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XHJcbmltcG9ydCB7IE5vdGljZVNlcnZpY2UgfSBmcm9tICcuLi9jb3JlL3NlcnZpY2VzL25vdGljZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgT2NjdXJyZW5jZVNlcnZpY2UgfSBmcm9tICcuLi9jb3JlL3NlcnZpY2VzL29jY3VycmVuY2Uuc2VydmljZSc7XHJcbmltcG9ydCB7IFByb2ZpbGVTZXJ2aWNlIH0gZnJvbSAnLi4vY29yZS9zZXJ2aWNlcy9wcm9maWxlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tICcuLi9jb3JlL21vZGVscy9ub3RpY2UnO1xyXG5pbXBvcnQgeyBPY2N1cnJlbmNlIH0gZnJvbSAnLi4vY29yZS9tb2RlbHMvb2NjdXJyZW5jZSc7XHJcbmltcG9ydCB7IFByb2ZpbGUgfSBmcm9tICcuLi9jb3JlL21vZGVscy9wcm9maWxlJztcclxuZGVjbGFyZSB2YXIgJGFpdm86IGFueTtcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAndC1zeXN0ZW1zLWlyaXMtaGVhZGVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vaGVhZGVyLmNvbXBvbmVudC5odG1sJyxcclxuICBzdHlsZVVybHM6IFsnLi9oZWFkZXIuY29tcG9uZW50LmNzcyddLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBIZWFkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBJbnB1dCgpIGxvZ091dE5hbWU7XHJcbiAgQElucHV0KCkgbmFtZVVzZXI7XHJcbiAgQE91dHB1dCgpIGFjdGlvblNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgcHVibGljIG5vdGljZXM6IE5vdGljZVtdO1xyXG4gIHB1YmxpYyBvY2N1cnJlbmNlczogT2NjdXJyZW5jZVtdO1xyXG4gIHB1YmxpYyBwcm9maWxlczogUHJvZmlsZVtdO1xyXG4gIHB1YmxpYyBwcm9maWxlOiBzdHJpbmc7XHJcbiAgcHVibGljIHVucmVhZE9jY3VycmVuY2U6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBub3RpY2VTZXJ2aWNlOiBOb3RpY2VTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBvY2N1cnJlbmNlU2VydmljZTogT2NjdXJyZW5jZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHByb2ZpbGVTZXJ2aWNlOiBQcm9maWxlU2VydmljZSxcclxuICAgIHByaXZhdGUgbW9kYWxTZXJ2aWNlOiBOZ2JNb2RhbCxcclxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZlxyXG4gICkge1xyXG4gICAgbGV0IHNjcmlwdENoYXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuXHJcbiAgICBzY3JpcHRDaGF0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gICAgc2NyaXB0Q2hhdC5zcmMgPSBcImh0dHBzOi8vY2RuLmFnZW50Ym90Lm5ldC9jb3JlLzU5ZmYwYTVmOWIzYjM1MTczNmQ2ZDVjNzUxYjZmYzNkLmpzXCI7XHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRDaGF0KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5wcm9maWxlU2VydmljZS5nZXQoKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMucHJvZmlsZXMgPSBkYXRhO1xyXG4gICAgICB0aGlzLnByb2ZpbGUgPSB0aGlzLnByb2ZpbGVzWzBdLmlkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5vY2N1cnJlbmNlU2VydmljZS5nZXQoKS5zdWJzY3JpYmUoZGF0YSA9PiB7XHJcbiAgICAgIHRoaXMub2NjdXJyZW5jZXMgPSBkYXRhXHJcblxyXG4gICAgICB0aGlzLnVucmVhZE9jY3VycmVuY2UgPSBkYXRhLmZpbHRlcigoaXRlbSkgPT4ge1xyXG4gICAgICAgIHJldHVybiAhaXRlbS5saWRvO1xyXG4gICAgICB9KS5sZW5ndGg7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5ub3RpY2VTZXJ2aWNlLmdldCgpLnN1YnNjcmliZShkYXRhID0+IHRoaXMubm90aWNlcyA9IGRhdGEpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAkYWl2by5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGFpdm8udXNlci5zZXQoXCJrZXlcIiwgXCIxMjM0NTZcIik7XHJcbiAgICAgICAgJGFpdm8udXNlci5zZXQoXCJuYW1lXCIsIFwiQWNhY2lhbm8gTmV2ZXMgU291emFcIik7XHJcbiAgICAgICAgJGFpdm8udXNlci5zZXQoXCJlbWFpbFwiLCBcImFjYWNpYW5vLm5ldmVzQGdtYWlsLmNvbVwiKTtcclxuICAgICAgICAkYWl2by51c2VyLnNldChcImRldmljZVwiLCBcIjExIDk0MjQ4MDY0NVwiKTtcclxuICAgICAgICAkYWl2by51c2VyLnNldChcImluc3RpdHV0b1wiLCBcIkluc3RpdHV0byBUZXN0ZVwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9LCAxMDAwKTtcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3Blbk1vZGFsKGNvbnRlbnQpOiB2b2lkIHtcclxuICAgIHRoaXMubW9kYWxTZXJ2aWNlLm9wZW4oY29udGVudCwgeyBhcmlhTGFiZWxsZWRCeTogJ21vZGFsLWJhc2ljLXRpdGxlJywgd2luZG93Q2xhc3M6ICdpcmlzLW1vZGFsJyB9KS5yZXN1bHQudGhlbigoKSA9PiB7IH0sIChyZWFzb24pID0+IHsgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVhZE1lc3NhZ2Uob2NjdXJyZW5jZTogT2NjdXJyZW5jZSk6IHZvaWQge1xyXG5cclxuICAgIGlmICh0aGlzLnVucmVhZE9jY3VycmVuY2UgPiAwKSB7XHJcbiAgICAgIG9jY3VycmVuY2UubGlkbyA9IHRydWU7XHJcbiAgICAgIHRoaXMub2NjdXJyZW5jZVNlcnZpY2UucHV0KG9jY3VycmVuY2UpO1xyXG4gICAgICB0aGlzLnVucmVhZE9jY3VycmVuY2UtLTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBjaGFuZ2VQcm9maWxlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5hY3Rpb25TZWxlY3QuZW1pdCh0aGlzLnByb2ZpbGUpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvZ091dCgpOiB2b2lkIHtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMubG9nT3V0TmFtZSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==