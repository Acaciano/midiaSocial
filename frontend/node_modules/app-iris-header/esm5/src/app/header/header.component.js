import * as tslib_1 from "tslib";
import { Component, Input, EventEmitter, Output, ViewEncapsulation, ElementRef } from '@angular/core';
import { NgbModal } from '@ng-bootstrap/ng-bootstrap';
import { NoticeService } from '../core/services/notice.service';
import { OccurrenceService } from '../core/services/occurrence.service';
import { ProfileService } from '../core/services/profile.service';
var HeaderComponent = /** @class */ (function () {
    function HeaderComponent(noticeService, occurrenceService, profileService, modalService, elementRef) {
        this.noticeService = noticeService;
        this.occurrenceService = occurrenceService;
        this.profileService = profileService;
        this.modalService = modalService;
        this.elementRef = elementRef;
        this.actionSelect = new EventEmitter();
        var scriptChat = document.createElement('script');
        scriptChat.type = "text/javascript";
        scriptChat.src = "https://cdn.agentbot.net/core/59ff0a5f9b3b351736d6d5c751b6fc3d.js";
        this.elementRef.nativeElement.appendChild(scriptChat);
    }
    HeaderComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.profileService.get().subscribe(function (data) {
            _this.profiles = data;
            _this.profile = _this.profiles[0].id;
        });
        this.occurrenceService.get().subscribe(function (data) {
            _this.occurrences = data;
            _this.unreadOccurrence = data.filter(function (item) {
                return !item.lido;
            }).length;
        });
        this.noticeService.get().subscribe(function (data) { return _this.notices = data; });
        setTimeout(function () {
            $aivo.ready(function () {
                $aivo.user.set("key", "123456");
                $aivo.user.set("name", "Acaciano Neves Souza");
                $aivo.user.set("email", "acaciano.neves@gmail.com");
                $aivo.user.set("device", "11 942480645");
                $aivo.user.set("instituto", "Instituto Teste");
            });
        }, 1000);
    };
    HeaderComponent.prototype.openModal = function (content) {
        this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title', windowClass: 'iris-modal' }).result.then(function () { }, function (reason) { });
    };
    HeaderComponent.prototype.readMessage = function (occurrence) {
        if (this.unreadOccurrence > 0) {
            occurrence.lido = true;
            this.occurrenceService.put(occurrence);
            this.unreadOccurrence--;
        }
    };
    HeaderComponent.prototype.changeProfile = function () {
        this.actionSelect.emit(this.profile);
    };
    HeaderComponent.prototype.logOut = function () {
        localStorage.removeItem(this.logOutName);
    };
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], HeaderComponent.prototype, "logOutName", void 0);
    tslib_1.__decorate([
        Input(),
        tslib_1.__metadata("design:type", Object)
    ], HeaderComponent.prototype, "nameUser", void 0);
    tslib_1.__decorate([
        Output(),
        tslib_1.__metadata("design:type", Object)
    ], HeaderComponent.prototype, "actionSelect", void 0);
    HeaderComponent = tslib_1.__decorate([
        Component({
            selector: 't-systems-iris-header',
            template: "<div class=\"header-iris\">\r\n    <div class=\"header-container\">\r\n        <div class=\"logo\"></div>\r\n        <div class=\"logo-hc\"></div>\r\n        <div class=\"logo-faepa\"></div>\r\n        <div class=\"separator\"></div>\r\n        <ul class=\"nav nav-mtd tabs-info z-depth-1\" role=\"tablist\">\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-dropdown [data]=\"profiles\" [(ngModel)]=\"profile\" (changeValue)=\"changeProfile()\">\r\n                </app-mini-dropdown>\r\n            </li>\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-button (click)=\"openModal(contentOccurrence)\" title=\"Ocorrencias\" icon=\"bell\"\r\n                    [num]=\"unreadOccurrence\"></app-mini-button>\r\n            </li>\r\n            <li class=\"nav-item nav-btn-iris\">\r\n                <app-mini-button (click)=\"openModal(contentNotice)\" icon=\"exclamation-circle\" title=\"Avisos\">\r\n                </app-mini-button>\r\n            </li>\r\n            <div class=\"content-right-header\">\r\n                <div class=\"container-user-login\">\r\n                    Ol\u00E1, {{nameUser}}\r\n                </div>\r\n                <div class=\"container-user-login\">\r\n                    <a (click)=\"logOut()\" href=\"javascript:\">\r\n                        <i class=\"fas fa-cog\" placement=\"bottom\" ngbTooltip=\"Alterar Senha\"\r\n                            tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                    |\r\n                    <a href=\"javascript:\">\r\n                        <i class=\"fas fa-comment agent-launcher\" placement=\"bottom\" ngbTooltip=\"Chat\" tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                    |\r\n                    <a (click)=\"logOut()\" href=\"javascript:\">\r\n                        <i class=\"fas fa-power-off\" placement=\"bottom\" ngbTooltip=\"Sair\"\r\n                            tooltipClass=\"tooltip-iris\"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </ul>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<ng-template #contentOccurrence let-modal>\r\n    <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Ocorr\u00EAncias</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let item of occurrences\" style=\"cursor: pointer;\" class=\"alert alert-secondary alert-non-read\"\r\n            [ngClass]=\"{'alert-read': item.lido}\" role=\"alert\">\r\n            <div class=\"date-alert\">\r\n                {{item.data | date: 'dd/MM/yyyy HH:mm'}}\r\n            </div>\r\n            <i class=\"far fa-check-square unread-icon\" *ngIf=\"!item.lido\"></i>\r\n            <i class=\"fas fa-check-square read-icon\" *ngIf=\"item.lido\"></i>\r\n            <a (click)=\"readMessage(item)\">{{item.mensagem}}</a>\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #contentNotice let-modal>\r\n    <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\" id=\"modal-basic-title\">Avisos</h4>\r\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"modal.dismiss('Cross click')\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n        <div *ngFor=\"let item of notices\" class=\"alert alert-secondary alert-default-iris\" role=\"alert\">\r\n            {{item.mensagem}} - {{item.data | date: 'dd/MM/yyyy HH:mm'}}\r\n        </div>\r\n    </div>\r\n</ng-template>\r\n\r\n<router-outlet></router-outlet>",
            encapsulation: ViewEncapsulation.None,
            styles: [".header-iris{width:100%;height:65px;float:left;box-shadow:0 5px 54px 2px rgba(0,0,0,.31);box-sizing:border-box;background-color:#fff;display:table;padding-top:10px}.header-container{width:1000px;margin:0 auto;position:relative}.logo{width:60px;height:22px;float:left;background:url(../../assets/img/logo.png);margin-top:12px}.logo-hc{width:60px;height:50px;float:left;background:url(../../assets/img/HC.png) 0 0/contain no-repeat;margin-top:4px;margin-left:10px}.logo-faepa{width:40px;height:50px;float:left;background:url(../../assets/img/Faepa.jpg) 0 0/contain no-repeat;margin-top:4px;margin-left:10px}.separator{width:1px;height:50px;float:left;background-color:#eef0f4;margin-left:15px;margin-right:15px}.nav-btn-iris{margin-top:5px;margin-right:5px}.nav-bar-iris{padding:0}.content-right-header{position:absolute;right:0;margin-top:5px}.container-user-login{width:100%;float:left;font-family:Gotham;font-size:11px;font-weight:700;color:#1368ad;text-align:right}.logout-button{margin-left:5px}.iris-modal .modal-content{background-color:#fff;font-family:Gotham;box-shadow:0 2px 28px 3px rgba(0,0,0,.24);border-radius:5px}.light-blue-backdrop{background-color:#5cb3fd}.modal-title{margin-bottom:0;line-height:1.5;font-weight:300;font-size:24px;color:#0870b3}.iris-modal .close{color:#0870b3}.alert-non-read{border-radius:5px;font-size:12px;font-weight:700;background-color:#fff}.alert-read{border-color:#0a88d9;font-weight:400}.date-alert{width:100%;font-size:10px}.unread-icon{position:absolute;right:10px;font-size:16px;top:10px}.read-icon{position:absolute;right:10px;font-size:16px;top:10px;color:#0a88d9}.alert-default-iris{background-color:#fff;font-size:12px}@media screen and (max-width:1000px){.header-container{width:100%;float:left;padding-left:10px;padding-right:10px;box-sizing:border-box}.content-right-header{right:10px}}"]
        }),
        tslib_1.__metadata("design:paramtypes", [NoticeService,
            OccurrenceService,
            ProfileService,
            NgbModal,
            ElementRef])
    ], HeaderComponent);
    return HeaderComponent;
}());
export { HeaderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FwcC1pcmlzLWhlYWRlci8iLCJzb3VyY2VzIjpbInNyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlHLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDaEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDeEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBWWxFO0lBV0UseUJBQW9CLGFBQTRCLEVBQ3RDLGlCQUFvQyxFQUNwQyxjQUE4QixFQUM5QixZQUFzQixFQUN0QixVQUFzQjtRQUpaLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQ3RDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7UUFDcEMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLGlCQUFZLEdBQVosWUFBWSxDQUFVO1FBQ3RCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFadEIsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBYzFDLElBQUksVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFbEQsVUFBVSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQztRQUNwQyxVQUFVLENBQUMsR0FBRyxHQUFHLG1FQUFtRSxDQUFDO1FBQ3JGLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsa0NBQVEsR0FBUjtRQUFBLGlCQTJCQztR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QixlQUFlLENBeUUzQjtJQUFELHNCQUFDO0NBQUEsQUF6RUQsSUF5RUM7U0F6RVksZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIFZpZXdFbmNhcHN1bGF0aW9uLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5nYk1vZGFsIH0gZnJvbSAnQG5nLWJvb3RzdHJhcC9uZy1ib290c3RyYXAnO1xyXG5pbXBvcnQgeyBOb3RpY2VTZXJ2aWNlIH0gZnJvbSAnLi4vY29yZS9zZXJ2aWNlcy9ub3RpY2Uuc2VydmljZSc7XHJcbmltcG9ydCB7IE9jY3VycmVuY2VTZXJ2aWNlIH0gZnJvbSAnLi4vY29yZS9zZXJ2aWNlcy9vY2N1cnJlbmNlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQcm9maWxlU2VydmljZSB9IGZyb20gJy4uL2NvcmUvc2VydmljZXMvcHJvZmlsZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnLi4vY29yZS9tb2RlbHMvbm90aWNlJztcclxuaW1wb3J0IHsgT2NjdXJyZW5jZSB9IGZyb20gJy4uL2NvcmUvbW9kZWxzL29jY3VycmVuY2UnO1xyXG5pbXBvcnQgeyBQcm9maWxlIH0gZnJvbSAnLi4vY29yZS9tb2RlbHMvcHJvZmlsZSc7XHJcbmRlY2xhcmUgdmFyICRhaXZvOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3Qtc3lzdGVtcy1pcmlzLWhlYWRlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2hlYWRlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vaGVhZGVyLmNvbXBvbmVudC5jc3MnXSxcclxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSGVhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuICBASW5wdXQoKSBsb2dPdXROYW1lO1xyXG4gIEBJbnB1dCgpIG5hbWVVc2VyO1xyXG4gIEBPdXRwdXQoKSBhY3Rpb25TZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIHB1YmxpYyBub3RpY2VzOiBOb3RpY2VbXTtcclxuICBwdWJsaWMgb2NjdXJyZW5jZXM6IE9jY3VycmVuY2VbXTtcclxuICBwdWJsaWMgcHJvZmlsZXM6IFByb2ZpbGVbXTtcclxuICBwdWJsaWMgcHJvZmlsZTogc3RyaW5nO1xyXG4gIHB1YmxpYyB1bnJlYWRPY2N1cnJlbmNlOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbm90aWNlU2VydmljZTogTm90aWNlU2VydmljZSxcclxuICAgIHByaXZhdGUgb2NjdXJyZW5jZVNlcnZpY2U6IE9jY3VycmVuY2VTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBwcm9maWxlU2VydmljZTogUHJvZmlsZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIG1vZGFsU2VydmljZTogTmdiTW9kYWwsXHJcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWZcclxuICApIHtcclxuICAgIGxldCBzY3JpcHRDaGF0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgc2NyaXB0Q2hhdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgIHNjcmlwdENoYXQuc3JjID0gXCJodHRwczovL2Nkbi5hZ2VudGJvdC5uZXQvY29yZS81OWZmMGE1ZjliM2IzNTE3MzZkNmQ1Yzc1MWI2ZmMzZC5qc1wiO1xyXG4gICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0Q2hhdCk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMucHJvZmlsZVNlcnZpY2UuZ2V0KCkuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICB0aGlzLnByb2ZpbGVzID0gZGF0YTtcclxuICAgICAgdGhpcy5wcm9maWxlID0gdGhpcy5wcm9maWxlc1swXS5pZDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMub2NjdXJyZW5jZVNlcnZpY2UuZ2V0KCkuc3Vic2NyaWJlKGRhdGEgPT4ge1xyXG4gICAgICB0aGlzLm9jY3VycmVuY2VzID0gZGF0YVxyXG5cclxuICAgICAgdGhpcy51bnJlYWRPY2N1cnJlbmNlID0gZGF0YS5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICByZXR1cm4gIWl0ZW0ubGlkbztcclxuICAgICAgfSkubGVuZ3RoO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMubm90aWNlU2VydmljZS5nZXQoKS5zdWJzY3JpYmUoZGF0YSA9PiB0aGlzLm5vdGljZXMgPSBkYXRhKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgJGFpdm8ucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRhaXZvLnVzZXIuc2V0KFwia2V5XCIsIFwiMTIzNDU2XCIpO1xyXG4gICAgICAgICRhaXZvLnVzZXIuc2V0KFwibmFtZVwiLCBcIkFjYWNpYW5vIE5ldmVzIFNvdXphXCIpO1xyXG4gICAgICAgICRhaXZvLnVzZXIuc2V0KFwiZW1haWxcIiwgXCJhY2FjaWFuby5uZXZlc0BnbWFpbC5jb21cIik7XHJcbiAgICAgICAgJGFpdm8udXNlci5zZXQoXCJkZXZpY2VcIiwgXCIxMSA5NDI0ODA2NDVcIik7XHJcbiAgICAgICAgJGFpdm8udXNlci5zZXQoXCJpbnN0aXR1dG9cIiwgXCJJbnN0aXR1dG8gVGVzdGVcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTAwMCk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIG9wZW5Nb2RhbChjb250ZW50KTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGFsU2VydmljZS5vcGVuKGNvbnRlbnQsIHsgYXJpYUxhYmVsbGVkQnk6ICdtb2RhbC1iYXNpYy10aXRsZScsIHdpbmRvd0NsYXNzOiAnaXJpcy1tb2RhbCcgfSkucmVzdWx0LnRoZW4oKCkgPT4geyB9LCAocmVhc29uKSA9PiB7IH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlYWRNZXNzYWdlKG9jY3VycmVuY2U6IE9jY3VycmVuY2UpOiB2b2lkIHtcclxuXHJcbiAgICBpZiAodGhpcy51bnJlYWRPY2N1cnJlbmNlID4gMCkge1xyXG4gICAgICBvY2N1cnJlbmNlLmxpZG8gPSB0cnVlO1xyXG4gICAgICB0aGlzLm9jY3VycmVuY2VTZXJ2aWNlLnB1dChvY2N1cnJlbmNlKTtcclxuICAgICAgdGhpcy51bnJlYWRPY2N1cnJlbmNlLS07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlUHJvZmlsZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuYWN0aW9uU2VsZWN0LmVtaXQodGhpcy5wcm9maWxlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBsb2dPdXQoKTogdm9pZCB7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvZ091dE5hbWUpO1xyXG4gIH1cclxufVxyXG4iXX0=